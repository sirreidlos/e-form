<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>nicks</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- <script type="text/javascript" src="main.js" defer></script> -->
  </head>
  <body onLoad="main();">
    <label for="fname">joe gay</label>
    <br /><br />
    <input type="text" id="fname" name="fname" />
    <br /><br />
    <input type="submit" value="Submit" />
    <ul id="ul">
      <li>test</li>
    </ul>
  </body>
  <script>
    function main() {
      console.log("nicks-cors-test");
      $.ajax({
        url: "http://api.dev.test",
        success: function (data) {
          console.log(data);
        },
      });
    }

    const evtSource = new EventSource(
      "http://api.dev.test/stream/63d61a5319a9f178d5652b4b"
    );

    const eventList = document.getElementById("ul");

    evtSource.onmessage = (e) => {
      console.log(e);
      const newElement = document.createElement("li");

      newElement.textContent = `message: ${e.data}`;
      eventList.appendChild(newElement);
    };
  </script>
</html>
